import{r as x}from"./index.BVOCwoKb.js";var A={exports:{}},S={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L;function _(){if(L)return S;L=1;var s=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(l,t,n){var c=null;if(n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),"key"in t){n={};for(var u in t)u!=="key"&&(n[u]=t[u])}else n=t;return t=n.ref,{$$typeof:s,type:l,key:c,ref:t!==void 0?t:null,props:n}}return S.Fragment=a,S.jsx=i,S.jsxs=i,S}var $;function J(){return $||($=1,A.exports=_()),A.exports}var e=J();function O({currentScreen:s,onNavigate:a,children:i}){const[l,t]=x.useState(!1),[n,c]=x.useState("left"),u=(g,r="left")=>{c(r),t(!0),setTimeout(()=>{a(g),t(!1)},300)},v=()=>{u("home","right")};return e.jsxs("div",{className:"min-h-screen bg-black/80 text-white overflow-hidden",children:[l&&e.jsx("div",{className:`fixed inset-0 z-50 bg-black/50 transition-opacity duration-300 ${l?"opacity-100":"opacity-0"}`}),e.jsxs("div",{className:`transition-transform duration-300 ease-in-out ${l?n==="left"?"-translate-x-full":"translate-x-full":"translate-x-0"}`,children:[s!=="home"&&e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("button",{onClick:v,className:"flex items-center gap-2 text-white/80 hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]})}),e.jsx("div",{className:"p-4",children:i})]})]})}function M({onNavigate:s,isRunning:a,time:i}){const[l,t]=x.useState(!1),n=new Date().toISOString().slice(0,10),c=u=>{const v=Math.floor(u/3600),g=Math.floor(u%3600/60),r=u%60;return`${v.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-4 flex items-center justify-center gap-3",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 stroke-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{strokeLinecap:"round",d:"M12 7v5l3 3"})]}),"Time Tracker"]}),e.jsx("p",{className:"text-white/80 text-lg max-w-md",children:"Manage your work cycles professionally. Create projects, track time and calculate payments automatically."})]}),a&&i>0&&e.jsx("div",{className:"mb-6 p-4 bg-green-500/20 border border-green-500/30 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-green-400 font-semibold mb-1",children:"⏱️ Timer Running"}),e.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:c(i)}),e.jsx("div",{className:"text-xs text-white/80 mt-1",children:'Click "Timer" to continue tracking'})]})}),e.jsxs("div",{className:"space-y-4 w-full max-w-sm",children:[e.jsxs("button",{onClick:()=>s("create-cycles"),className:"w-full px-6 py-4 bg-blue-500 hover:bg-blue-600 text-black font-semibold rounded-lg transition-colors text-lg flex items-center justify-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Cycles / Projects"]}),e.jsxs("button",{onClick:()=>s("timer"),className:`w-full px-6 py-4 text-black font-semibold rounded-lg transition-colors text-lg flex items-center justify-center gap-3 ${a?"bg-yellow-500 hover:bg-yellow-600":"bg-green-500 hover:bg-green-600"}`,children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a?"Timer (Running)":"Timer"]}),e.jsxs("button",{onClick:()=>s("history"),className:"w-full px-6 py-4 bg-cyan-500 hover:bg-cyan-600 text-black font-semibold rounded-lg transition-colors text-lg flex items-center justify-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"View History"]})]}),e.jsxs("div",{className:"mt-12 text-center text-white/60 text-sm flex flex-col items-center gap-2",children:[e.jsx("p",{children:"✨ Install this app on your device"}),e.jsxs("button",{className:"flex items-center gap-1 text-white/80 hover:text-cyan-400 transition-colors text-xs mt-2",onClick:()=>t(!0),"aria-label":"About this app",children:[e.jsx("span",{className:"inline-block align-middle",children:e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"white",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"white"}),e.jsx("text",{x:"12",y:"16",textAnchor:"middle",fontSize:"12",fontWeight:"bold",fill:"black",fontFamily:"Arial, sans-serif",children:"i"})]})}),"About"]})]}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-xs w-full text-center relative",children:[e.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-black text-xl font-bold",onClick:()=>t(!1),"aria-label":"Close about dialog",children:"×"}),e.jsx("h2",{className:"text-xl font-bold mb-2 text-black",children:"About"}),e.jsxs("div",{className:"text-black text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"App:"})," TimeTracker PWA"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Version:"})," 1.0.0"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Last update:"})," ",n]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Creator:"})," Auguslabs"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Contact:"})," ",e.jsx("a",{href:"mailto:explore@auguslabs.com",className:"text-cyan-600 underline hover:text-cyan-800",children:"explore@auguslabs.com"})]})]})]})})]})}const T=(s,a)=>{const[i,l]=x.useState(()=>{if(typeof window>"u")return a;try{const n=window.localStorage.getItem(s);return n?JSON.parse(n):a}catch(n){return console.error(`Error reading localStorage key "${s}":`,n),a}});return[i,n=>{try{const c=n instanceof Function?n(i):n;l(c),typeof window<"u"&&window.localStorage.setItem(s,JSON.stringify(c))}catch(c){console.error(`Error setting localStorage key "${s}":`,c)}}]},E={CYCLES:"cycles",SESSIONS:"sessions",SETTINGS:"settings"},P=(s,a=10)=>{const i={id:Date.now(),name:s,hourlyRate:a,status:"active",createdAt:new Date().toISOString(),sessions:[]},l=k();return l.push(i),localStorage.setItem(E.CYCLES,JSON.stringify(l)),i},k=()=>{try{const s=localStorage.getItem(E.CYCLES);return s?JSON.parse(s):[]}catch(s){return console.error("Error loading cycles:",s),[]}},W=()=>k().find(a=>a.status==="active")||null,B=s=>{const i=k().map(l=>l.id===s?{...l,status:"closed",closedAt:new Date().toISOString()}:l);return localStorage.setItem(E.CYCLES,JSON.stringify(i)),i},Y=(s,a)=>{const l=k().map(t=>t.id===s?{...t,sessions:[...t.sessions||[],a]}:t);return localStorage.setItem(E.CYCLES,JSON.stringify(l)),l};function U({onCycleChange:s,onNavigate:a}){const[i,l]=T("cycles",[]),[t,n]=x.useState(null),[c,u]=x.useState(""),[v,g]=x.useState(10),[r,d]=x.useState(!1);x.useEffect(()=>{d(!0);const o=W();n(o)},[i]);const h=()=>{if(!c.trim())return;const o=P(c,v);l(m=>[...m,o]),u(""),s?.(o)},b=o=>{const m=B(o);l(m),s?.(null)},p=o=>!o.sessions||o.sessions.length===0?0:o.sessions.reduce((j,y)=>j+y.duration/3600,0)*o.hourlyRate;return r?e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 shadow-lg max-w-md mx-auto mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-white",children:"Cycle Management"}),t&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4 mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-400 mb-2",children:["Active Cycle: ",t.name]}),e.jsxs("div",{className:"text-sm text-white/80 space-y-1",children:[e.jsxs("p",{children:["Hours worked: ",(t.sessions?.reduce((o,m)=>o+m.duration,0)/3600).toFixed(2),"h"]}),e.jsxs("p",{children:["Hourly rate: $",t.hourlyRate]}),e.jsxs("p",{className:"text-green-400 font-semibold",children:["Total: $",p(t).toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-3 mt-3 justify-center",children:[e.jsx("button",{onClick:()=>b(t.id),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg transition-colors text-sm",children:"Close Cycle"}),a&&e.jsx("button",{onClick:()=>a("timer"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors text-sm",children:"Go to Timer"})]})]}),!t&&e.jsxs("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-400 mb-4",children:"Create New Cycle"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/80 mb-1",children:"Cycle Name"}),e.jsx("input",{type:"text",value:c,onChange:o=>u(o.target.value),placeholder:"Ex: Web Project - January 2024",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:border-blue-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/80 mb-1",children:"Hourly Rate ($)"}),e.jsx("input",{type:"number",value:v,onChange:o=>g(Number(o.target.value)),min:"1",step:"0.5",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-blue-400"})]}),e.jsx("button",{onClick:h,disabled:!c.trim(),className:"w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-500 disabled:cursor-not-allowed text-white font-semibold rounded-lg transition-colors",children:"Create Cycle"})]})]}),i.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Recent Cycles"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:i.slice(0,5).map(o=>e.jsxs("div",{className:"bg-white/5 rounded p-3 text-white text-sm",children:[e.jsx("div",{className:"font-semibold",children:o.name}),e.jsxs("div",{className:"text-white/70 text-xs",children:[o.sessions?.length||0," sessions - $",p(o).toFixed(2)]}),e.jsx("div",{className:"text-white/50 text-xs",children:o.status==="active"?"🟢 Active":"✅ Closed"})]},o.id))})]})]}):e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 shadow-lg max-w-md mx-auto mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-white/80",children:"Loading..."})]})})}function V({onNavigate:s}){return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Cycle Management"}),e.jsx("p",{className:"text-white/80",children:"Create and manage your work projects"})]}),e.jsx(U,{onNavigate:s})]})}function z({activeCycle:s,onSessionSaved:a,time:i,isRunning:l,startTimer:t,pauseTimer:n,resetTimer:c,isWorkerSupported:u,onCreateCycle:v,onNavigate:g}){const[r,d]=T("cycles",[]),[h,b]=x.useState(null),[p,o]=x.useState("");x.useEffect(()=>{l||b(null)},[l]);const m=()=>{if(!s){alert("You must create a cycle before starting the timer");return}b(Date.now()),t()},j=()=>{n()},y=()=>{c(),b(null),o("")},H=()=>{if(i>0&&s){const f=Date.now(),C=h?new Date(h):new Date(f-i*1e3),w=new Date(f),N={id:Date.now(),duration:i,startTime:C.toLocaleTimeString(),endTime:w.toLocaleTimeString(),date:w.toLocaleDateString(),formattedTime:D(i),activityDetail:p.trim()},F=Y(s.id,N);d(F),c(),b(null),o(""),a?.(N)}else s||alert("You must create a cycle before saving a session")},D=f=>{const C=Math.floor(f/3600),w=Math.floor(f%3600/60),N=f%60;return`${C.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`},R=()=>s?s.sessions||[]:[],I=()=>(R().reduce((w,N)=>w+N.duration,0)/3600).toFixed(2);return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 shadow-lg max-w-md mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-white",children:"Timer"}),s&&e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"text-sm text-green-400 font-semibold",children:["Cycle: ",s.name]}),l&&h&&e.jsxs("div",{className:"text-xs text-white/80",children:["Start time: ",new Date(h).toLocaleTimeString()]}),e.jsxs("div",{className:"text-xs text-white/80",children:["Total accumulated: ",I(),"h - $",(I()*s.hourlyRate).toFixed(2)]})]}),!s&&e.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 mb-4",children:[e.jsx("div",{className:"text-sm text-yellow-400 font-semibold",children:"⚠️ No active cycle"}),e.jsx("div",{className:"text-xs text-white/80",children:"Create a cycle to start working"})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"text-4xl font-mono font-bold text-white mb-2",children:D(i)}),e.jsx("div",{className:"text-sm text-white/80",children:l?"⏱️ Working":"⏸️ Paused"})]}),e.jsxs("div",{className:"flex justify-center gap-3 mb-6 flex-wrap",children:[l?e.jsx("button",{onClick:j,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"⏸️ Pause"}):e.jsx("button",{onClick:m,disabled:!s,className:"px-6 py-2 bg-green-400 hover:bg-green-500 disabled:bg-gray-300 disabled:cursor-not-allowed text-black font-semibold rounded-lg transition-colors",children:"▶️ Start"}),e.jsx("button",{onClick:y,disabled:!s,className:"px-6 py-2 bg-gray-200 hover:bg-gray-300 text-black font-semibold rounded-lg transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"🔄 Reset"}),e.jsx("button",{onClick:()=>g&&g("home"),className:"px-6 py-2 bg-cyan-400 hover:bg-cyan-500 text-black font-semibold rounded-lg transition-colors",children:"🏠 Back to Home"}),!s&&e.jsx("button",{onClick:v,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-black font-semibold rounded-lg transition-colors",children:"➕ Create New Cycle"}),i>0&&e.jsx("button",{onClick:H,disabled:!s,className:"px-6 py-2 bg-blue-400 hover:bg-blue-500 disabled:bg-gray-300 disabled:cursor-not-allowed text-black font-semibold rounded-lg transition-colors",children:"💾 Stop & Save"})]}),e.jsxs("div",{className:"mb-6 max-w-md mx-auto",children:[e.jsx("label",{htmlFor:"activity-detail",className:"block text-sm text-white/80 mb-2 font-semibold",children:"Activities Detail"}),e.jsx("textarea",{id:"activity-detail",value:p,onChange:f=>o(f.target.value),placeholder:"Describe the activities for this session...",className:"w-full min-h-[60px] px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:border-green-400 resize-vertical"})]}),s&&R().length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Cycle Sessions"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:R().slice().reverse().slice(0,5).map(f=>e.jsxs("div",{className:"bg-white/5 rounded p-3 text-white text-sm",children:[e.jsx("div",{className:"font-mono font-bold",children:f.formattedTime}),e.jsxs("div",{className:"text-white/70 text-xs",children:[f.date," | ",f.startTime," - ",f.endTime]}),f.activityDetail&&e.jsxs("div",{className:"text-xs text-white/70 mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Activities:"})," ",f.activityDetail]}),e.jsxs("div",{className:"text-green-400 text-xs",children:["$",(f.duration/3600*s.hourlyRate).toFixed(2)]})]},f.id))})]})]})}function G({time:s,isRunning:a,startTimer:i,pauseTimer:l,resetTimer:t,isWorkerSupported:n,onNavigate:c}){const[u,v]=T("cycles",[]),[g,r]=x.useState(null),[d,h]=x.useState(!1);x.useEffect(()=>{h(!0);const m=W();r(m)},[u]);const b=m=>{const j=u.find(y=>y.id===m);r(j)},p=m=>{console.log("Session saved:",m);const j=k();v(j)},o=()=>{c&&c("create-cycles")};return d?e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Timer"}),e.jsx("p",{className:"text-white/80",children:"Select a cycle and start working"})]}),e.jsxs("div",{className:"mb-8 max-w-md mx-auto",children:[e.jsx("label",{className:"block text-sm text-white/80 mb-2",children:"Select Cycle:"}),e.jsxs("select",{value:g?.id||"",onChange:m=>b(m.target.value),className:"w-full px-4 py-2 bg-blue-40050 border border-white/20 rounded-lg text-gray-600 focus:outline-none focus:border-green-400",children:[e.jsx("option",{value:"",children:"-- Select a cycle --"}),u.filter(m=>m.status==="active").map(m=>e.jsxs("option",{value:m.id,children:[m.name," ($",m.hourlyRate,"/hour)"]},m.id))]})]}),e.jsx(z,{activeCycle:g,onSessionSaved:p,time:s,isRunning:a,startTimer:i,pauseTimer:l,resetTimer:t,isWorkerSupported:n,onCreateCycle:o,onNavigate:c})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto"}),e.jsx("p",{className:"mt-2 text-white/80",children:"Loading..."})]})})}function q(){const[s,a]=T("cycles",[]),[i,l]=x.useState(null),[t,n]=x.useState("all"),c=s.filter(r=>t==="all"?!0:t==="active"?r.status==="active":t==="closed"?r.status==="closed":!0),u=r=>!r.sessions||r.sessions.length===0?0:r.sessions.reduce((h,b)=>h+b.duration/3600,0)*r.hourlyRate,v=r=>!r.sessions||r.sessions.length===0?0:(r.sessions.reduce((h,b)=>h+b.duration,0)/3600).toFixed(2),g=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 shadow-lg max-w-4xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-white",children:"Cycle History"}),e.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[e.jsxs("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${t==="all"?"bg-blue-500 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:["All (",s.length,")"]}),e.jsxs("button",{onClick:()=>n("active"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${t==="active"?"bg-green-500 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:["Active (",s.filter(r=>r.status==="active").length,")"]}),e.jsxs("button",{onClick:()=>n("closed"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${t==="closed"?"bg-purple-500 text-white":"bg-white/10 text-white/80 hover:bg-white/20"}`,children:["Closed (",s.filter(r=>r.status==="closed").length,")"]})]}),e.jsx("div",{className:"grid gap-4",children:c.length===0?e.jsx("div",{className:"text-center text-white/60 py-8",children:t==="all"?"No cycles created":`No ${t==="active"?"active":"closed"} cycles`}):c.slice().reverse().map(r=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:r.name}),e.jsxs("div",{className:"text-sm text-white/70",children:["Created: ",g(r.createdAt),r.closedAt&&` | Closed: ${g(r.closedAt)}`]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${r.status==="active"?"bg-green-500/20 text-green-400":"bg-purple-500/20 text-purple-400"}`,children:r.status==="active"?"🟢 Active":"✅ Closed"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60",children:"Sessions"}),e.jsx("div",{className:"text-white font-semibold",children:r.sessions?.length||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60",children:"Total Hours"}),e.jsxs("div",{className:"text-white font-semibold",children:[v(r),"h"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60",children:"Hourly Rate"}),e.jsxs("div",{className:"text-white font-semibold",children:["$",r.hourlyRate]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white/60",children:"Total"}),e.jsxs("div",{className:"text-green-400 font-semibold",children:["$",u(r).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>l(i?.id===r.id?null:r),className:"px-3 py-1 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 text-sm rounded transition-colors",children:[i?.id===r.id?"Hide":"View"," Details"]}),r.status==="closed"&&e.jsx("button",{onClick:()=>{alert("Share report function coming soon")},className:"px-3 py-1 bg-green-500/20 hover:bg-green-500/30 text-green-400 text-sm rounded transition-colors",children:"📧 Share"})]}),i?.id===r.id&&r.sessions&&r.sessions.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Work Sessions"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.sessions.map(d=>e.jsx("div",{className:"bg-white/5 rounded p-2 text-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"font-mono font-bold text-white",children:d.date}),e.jsxs("div",{className:"text-xs text-white/80",children:["Start: ",d.startTime," | End: ",d.endTime]}),e.jsxs("div",{className:"text-xs text-white/60",children:["Total: ",(d.duration/3600).toFixed(2),"h"]}),d.activityDetail&&e.jsxs("div",{className:"text-xs text-white/70 mt-1",children:[e.jsx("span",{className:"font-semibold",children:"Activities:"})," ",d.activityDetail]})]}),e.jsx("div",{className:"text-right md:ml-4",children:e.jsxs("div",{className:"text-green-400 font-semibold text-lg",children:["$",(d.duration/3600*r.hourlyRate).toFixed(2)]})})]})},d.id))})]})]},r.id))})]})}function Q(){return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Cycle History"}),e.jsx("p",{className:"text-white/80",children:"Review all your projects and work sessions"})]}),e.jsx(q,{})]})}const X=()=>{const[s,a]=x.useState(0),[i,l]=x.useState(!1),t=x.useRef(null),[n,c]=x.useState(!1);x.useEffect(()=>{if(typeof Worker<"u")try{t.current=new Worker("/timer-worker.js"),c(!0),t.current.onmessage=d=>{const{type:h,time:b,isRunning:p}=d.data;switch(h){case"TICK":a(b);break;case"PAUSED":a(b),l(!1);break;case"RESET":a(b),l(!1);break;case"CURRENT_TIME":a(b),l(p);break;case"TIME_SET":a(b);break}}}catch{console.warn("Web Worker not supported, falling back to regular timer"),c(!1)}return()=>{t.current&&t.current.terminate()}},[]);const u=()=>{n&&t.current&&t.current.postMessage({type:"START_TIMER",data:{initialTime:s}}),l(!0)},v=()=>{n&&t.current?t.current.postMessage({type:"PAUSE_TIMER"}):l(!1)},g=()=>{n&&t.current?t.current.postMessage({type:"RESET_TIMER"}):(a(0),l(!1))},r=()=>{n&&t.current&&t.current.postMessage({type:"GET_CURRENT_TIME"})};return x.useEffect(()=>{let d=null;return i&&!n?d=setInterval(()=>{a(h=>h+1)},1e3):!i&&d&&clearInterval(d),()=>clearInterval(d)},[i,n]),x.useEffect(()=>{const d=()=>{!document.hidden&&n&&t.current&&r()};return document.addEventListener("visibilitychange",d),()=>{document.removeEventListener("visibilitychange",d)}},[n]),{time:s,isRunning:i,startTimer:u,pauseTimer:v,resetTimer:g,isWorkerSupported:n}};function K(){const[s,a]=x.useState("home"),[i,l]=x.useState(!1),{time:t,isRunning:n,startTimer:c,pauseTimer:u,resetTimer:v,isWorkerSupported:g}=X(),[r,d]=x.useState(!1);x.useEffect(()=>{if("serviceWorker"in navigator){let p=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{p||(window.location.reload(),p=!0)}),navigator.serviceWorker.getRegistration&&navigator.serviceWorker.getRegistration().then(o=>{o&&o.addEventListener("updatefound",()=>{const m=o.installing;m&&m.addEventListener("statechange",()=>{m.state==="installed"&&navigator.serviceWorker.controller&&d(!0)})})})}},[]),x.useEffect(()=>{l(!0)},[]);const h=p=>{a(p)};if(!i)return e.jsx("div",{className:"min-h-screen bg-black/80 text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-white/80",children:"Uploading..."})]})});const b=()=>{switch(s){case"home":return e.jsx(M,{onNavigate:h,isRunning:n,time:t});case"create-cycles":return e.jsx(V,{onNavigate:h});case"timer":return e.jsx(G,{time:t,isRunning:n,startTimer:c,pauseTimer:u,resetTimer:v,isWorkerSupported:g,onNavigate:h});case"history":return e.jsx(Q,{});default:return e.jsx(M,{onNavigate:h,isRunning:n,time:t})}};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-yellow-400 text-black text-center py-3 font-semibold cursor-pointer shadow-lg",onClick:()=>window.location.reload(),children:"New version available. Click to update."}),e.jsx(O,{currentScreen:s,onNavigate:h,children:b()})]})}export{K as default};
